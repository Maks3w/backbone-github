(function(){window.GitHub={},GitHub.token=null,GitHub.authenticate=function(a,b,c){var d;return d={},c.scope!=null&&(d.scope=c.scope),$.ajax({url:"https://api.github.com/authorizations",contentType:"application/json",dataType:"json",type:"POST",data:JSON.stringify(d),headers:{Authorization:"Basic "+btoa(""+a+":"+b)},success:function(a,b,d){GitHub.token=a.token;if(c.success!=null)return c.success(a,b,d)},error:c.error})},GitHub.sync=function(a,b,c){var d;return d=_.extend({beforeSend:function(a){a.setRequestHeader("Accept","application/vnd.github+json");if(GitHub.token)return a.setRequestHeader("Authorization","bearer "+GitHub.token)}},c),Backbone.sync(a,b,d)},GitHub.Model=Backbone.Model.extend({sync:GitHub.sync}),GitHub.Collection=Backbone.Collection.extend({sync:GitHub.sync}),GitHub.Relations={ownedRepos:function(a){var b;return b=new GitHub.Repos,b.url=typeof this.url=="function"?this.url():this.url,b.url+="/repos",b.fetch(a),b},ownedOrgs:function(a){var b;return b=new GitHub.Organizations,b.url=typeof this.url=="function"?this.url():this.url,b.url+="/orgs",b.fetch(a),b}},GitHub.User=GitHub.Model.extend({urlRoot:"https://api.github.com/users/",repos:GitHub.Relations.ownedRepos,organizations:GitHub.Relations.ownedOrgs},{fetch:function(a,b){var c;return c=new GitHub.User({id:a}),c.fetch(b),c}}),GitHub.Organization=GitHub.Model.extend({urlRoot:"https://api.github.com/orgs/",repos:GitHub.Relations.ownedRepos},{fetch:function(a,b){var c;return c=new GitHub.Organization({id:a}),c.fetch(b),c}}),GitHub.Organizations=GitHub.Collection.extend({url:"https://api.github.com/user/orgs",model:GitHub.Organization}),GitHub.Repo=GitHub.Model.extend({url:function(){return this.get("url")||"https://api.github.com/repos/"+this.get("path")}},{fetch:function(a,b,c){var d;return d=new GitHub.Repo({path:""+a+"/"+b}),d.fetch(c),d}}),GitHub.Repos=GitHub.Collection.extend({url:"https://api.github.com/user/repos",model:GitHub.Repo}),GitHub.currentUser=new GitHub.User,GitHub.currentUser.url="https://api.github.com/user",GitHub.currentUser.urlRoot=null}).call(this);